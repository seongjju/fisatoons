<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›¹íˆ° ìƒì„¸ ì •ë³´</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/Chart.js"></script>

</head>
<body>
    <h1>{{ webtoon['title'] }}</h1>

    <canvas id="ratingChart"></canvas>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
    let ctx = document.getElementById("ratingChart").getContext("2d");

    let episodeNumbers = JSON.parse('{{ episode_numbers | safe }}');
    let actualRatings = JSON.parse('{{ actual_ratings | safe }}');
    let model1Predictions = JSON.parse('{{ model_1_predictions | safe }}');
    let model2Predictions = JSON.parse('{{ model_2_predictions | safe }}');
    let model3Predictions = JSON.parse('{{ model_3_predictions | safe }}');

    let ratingChart = new Chart(ctx, {
        type: "line",
        data: {
            labels: episodeNumbers,
            datasets: [
                {
                    label: "ì‹¤ì œ ë³„ì ",
                    borderColor: "#ff4757",  // ë„¤ì˜¨ ë ˆë“œ
                    backgroundColor: "rgba(255, 71, 87, 0.2)",
                    data: actualRatings,
                    fill: false,
                    borderWidth: 2,
                    pointRadius: 4,   // ğŸ”¹ ë°ì´í„° í¬ì¸íŠ¸ í¬ê¸° (ì )
                    pointBackgroundColor: "#ff4757"
                },
                {
                    label: "ëª¨ë¸ 1 ì˜ˆì¸¡ ë³„ì ",
                    borderColor: "#1e90ff",  // ë„¤ì˜¨ ë¸”ë£¨
                    backgroundColor: "rgba(30, 144, 255, 0.2)",
                    data: model1Predictions,
                    fill: false,
                    borderWidth: 2,
                    pointRadius: 4,
                    pointBackgroundColor: "#1e90ff"
                },
                {
                    label: "ëª¨ë¸ 2 ì˜ˆì¸¡ ë³„ì ",
                    borderColor: "#2ed573",  // ë„¤ì˜¨ ê·¸ë¦°
                    backgroundColor: "rgba(46, 213, 115, 0.2)",
                    data: model2Predictions,
                    fill: false,
                    borderWidth: 2,
                    pointRadius: 4,
                    pointBackgroundColor: "#2ed573"
                },
                {
                    label: "ëª¨ë¸ 3 ì˜ˆì¸¡ ë³„ì ",
                    borderColor: "#ffa502",  // ë„¤ì˜¨ ì˜¤ë Œì§€
                    backgroundColor: "rgba(255, 165, 2, 0.2)",
                    data: model3Predictions,
                    fill: false,
                    borderWidth: 2,
                    pointRadius: 4,
                    pointBackgroundColor: "#ffa502"
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    min: 3.0,  // â­ ìµœì†Œ 5.0
                    max: 10.0, // â­ ìµœëŒ€ 10.0
                    ticks: {
                        stepSize: 0.5,  // â­ 0.5 ë‹¨ìœ„ ëˆˆê¸ˆ
                        color: "#333"
                    },
                    grid: { color: "#bbb" }  // ëˆˆê¸ˆ ìƒ‰ ë³€ê²½
                },
                x: {
                    grid: { color: "#ddd" }
                }
            }
        }
    });
});
    </script>
    <a href="/" class="back-button">ğŸ”™ ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
</body>
</html>